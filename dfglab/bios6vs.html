<!DOCTYPE html>
<!--
saved as 20190311 dchiangs
-->
<html>
    <head>
        <title>Bios6vs Visual Studio project</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/dotty.css">
        <script src="js/dotty.js"></script>
        <style>
            body {
                font-family: Consolas, Monaco, monospace;
                font-size: 123%;
                margin-top: 0;
            }
        </style>
        <script>
            window.onload = function () {
                var msg = poplinks();
            }
        </script>
    </head>
    <body>
        <header>
            <h1>BIOS Viewer 6 Visual Studio Project Documentation</h1>
        </header>
        <nav></nav>
        <main>
            <section>
                <h2>Activity</h2>
                <details>
                    <summary>bios6 project log</summary>
                    <ol>
                        <li>
                            20180531 Created initial git repo in tfs and cloned to local dir for coding.
                            Created basic map page.
                        </li>
                        <li>
                            20180601 Copied over image files under ./images and favicon.ico.
                            Put JavaScript code into external files: abc, amd, appjs.
                            Populated navigation bar (nav) items.
                        </li>
                        <li>
                            20180605 Setup project build configurations and web
                            config transforms and DEV publishing profile. Published
                            to DEV first time.
                        </li>
                        <li>
                            20180606 Copy Default.aspx content from gamma
                            and DFG Provider codes from bios5
                            <p>
                                Web.config: configuration/appSettings/add
                                key=biosToken;
                                configuration/connectionStrings/add
                                name=AspNetDB; name=DFGMembershipProvider;
                                name=DFGRoleProvider;
                                system.web/compilation/assemblies;
                                authentication; authorization; machineKey;
                                membership/providers; roleManager/providers;
                            </p>
                            <p>
                                Add References: \\geodata\nrma\software\Dfg.Affiliates,DFG.Web.Providers
                            </p>
                            <p>
                                Copied itextsharp.dll from bios/App_Code and included in project.
                            </p>
                            <p>
                                Copied Application_AuthenticateRequest method from Global.asax.cs
                            </p>
                            <p>
                                Copied Default.aspx.cs code from bios5
                            </p>
                            <pre>
                                Server Error in '/' Application.
Parser Error
Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately.

Parser Error Message: Ambiguous match found.
*** CANNOT have same js variable name as html control id set to runat=server
                            </pre>
                        </li>
                        <li>
                            20180607
                            <p>
                                <a href="https://stackoverflow.com/questions/3520809/parser-error-message-ambiguous-match-found">
                                    Parser Error Message: Ambiguous match found
                                </a> on running Default.aspx?
                                FIX: renamed HtmlHiddenInput id=username to user_name
                                so it does not conflict with code behind variable userName.
                            </p>
                            <p>
                                Html and web control inside aspLoginView not recognized by code-behind.
                                Both aspLinkButton and aspHyperLink flagged with warning
                                when placed inside aspLoginView code block. Use
                                <a href="https://support.microsoft.com/en-us/help/976112/introduction-to-asp-net-inline-expressions-in-the-net-framework">
                                    ASP.NET inline expression
                                </a> to dynamically write out myaccount login
                                ReturnUrl as Request.Url.PathAndQuery bracketed
                                by Response.Write html code explicitly (server-side
                                expression cannot be quoted inside template attribute.
                            </p>
                        </li>
                        <li>
                            20180608 Set up login view for DFG Provider.
                        </li>
                        <li>
                            20180611 Bios6 web app in IIS created. Publish from
                            local box to appsdev
                            <a href="https://appsdev.wildlife.ca.gov/bios6/Default.aspx"></a>
                            <em class="bug">
                                ERROR--Control 'asploginview_ctl02' of type 'LoginStatus' must be placed inside a form tag with runat=server.
                            </em> --fixed by moving closing form tag to wrap around nav element.
                            <ol>
                                <li>
                                    EDIT login view: put user icon in front of user login name;
                                    use medium font size for .a_login class;
                                    change Log off to Logout in sign out link.
                                    Assign splash login_go input button to go to
                                    /myaccount/login?ReturnUrl=+location.href.split(location.host)[1]
                                </li>
                            </ol>
                        </li>
                    </ol>
                </details>
                <details>
                    <summary>deantest prototype</summary>
                    <ol>
                        <li>
                            20180717 Current development
                            <a href="../../deantest/mapp.html">mapp</a>
                        </li>
                        <li>
                            20180718 Dynamically attaching script mapp.js with
                            random version number on window load to document body
                            makes the script update every time page loads.
                        </li>
                        <li>
                            20180720 Wrapping input-checkbox inside a label tag
                            automatically checks the checkbox if label is clicked,
                            but if label's for attribute is assigned to another
                            input-radio, then the bond to the checkbox is broken.
                        </li>
                        <li>
                            20180720 BUG: cannot instantiate new custom object
                            LayerItem inside esriRequest callback when looping
                            through the map service sublayers?
                        </li>
                    </ol>
                </details>
                <details>
                    <summary>gamma web site log</summary>
                    <ol>
                        <li>
                            20180604 Init new git repo gamma on Visual Studio Online:
                            <a href="https://dfgchiang.visualstudio.com/_git/gamma"></a>
                        </li>
                        <li>
                            <code>git clone https://dfgchiang.visualstudio.com/gamma/_git/gamma C:\app\www\gamma</code>
                        </li>
                        <li>
                            VS2015/New/Web Site/ASP.NET Web Site (.NET Framework 4.6.2) VC#,
                            file system location=C:\app\www\gamma
                        </li>
                        <li>
                            Saved gamma.sln as back into own folder.
                        </li>
                        <li>
                            Delete unnecessary files and code from VS template.
                        </li>
                        <li>
                            Copied content over from /c/code/bios6/bios6 project.
                        </li>
                        <li class="bug fixed">
                            20180605 Can login with AD provider but cannot detect
                            current context user after logon?
                        </li>
                        <li>
                            20180606 Login name can be read as cookie name in Global asax
                            but User.Identity.Name is blank?
                        </li>
                        <li>
                            20180607 Removed packages folder. Removed code behind
                            variables userName and userGroups.
                        </li>
                        <li>
                            20180608 Found code copied from sample into Web.config
                            that removed FormsAuthentication and commented out and
                            it fixed user identity in login view after logon.
                        </li>
                    </ol>
                </details>
            </section>
            <section>
                <h2>Standard Tasks</h2>
                <details>
                    <summary>Bios6 Source Control</summary>
                    <ol>
                        <li>
                            20180531 Under TFS project
                            <a href="http://hqtfs:8080/tfs/AppDev/_git/BIOS">BIOS</a>
                            CODE Explorer, create a new git repo named
                            <a href="http://hqtfs:8080/tfs/AppDev/BIOS/_git/bios6">bios6</a>
                        </li>
                        <li>
                            Click on Create a READ ME file and edit the README.md
                        </li>
                        <li>
                            Clone the TFS git repo to a local folder either through
                            Visual Studio (Team Explorer/Manage Connections/hqtfs/BIOS/bios6
                            - right click to Clone and enter local directory;
                            or through Git for Windows command line:
                            <pre>
                            cd /c/code
git clone http://hqtfs:8080/tfs/AppDev/BIOS/_git/bios6 bios6
                            </pre>
                        </li>
                        <li>
                            Create a new VS project
                            <pre>
                            ASP.NET Web Application Project (.NET Framework 4.6.2 C#)
 - Name: bios6
 - Location: C:\depo\
 - Solutin name: bios6
 - Create directory for solution =true
 - Create new Git repository =true
 - Template: Web Forms
 - Authentication: No Authentication
                            </pre>
                        </li>
                        <li>
                            Delete unnecessary junk files from default setup
                        </li>
                        <li>
                            Remove all content in Default.aspx file and Page attributes
                            and populate it with a simple default html content from a new web form.
                        </li>
                        <li>
                            Add the content from aspnet462webapp under /c/depo/bios6
                            into new empty git repo clone /c/code/bios6.
                            Stage all changes, commit and push to remote origin
                            (hosted on //hqtfs).
                        </li>
                    </ol>
                </details>
                <details>
                    <summary>Bios6 VS Project Configuration</summary>
                    <ol>
                        <li>
                            <h4>Add Solution Build Configurations</h4>
                            In VS2015, select Build/Configuration Manager...
                            (or right click on solution item and pick Configuration Manager)
                            Active solution configuration/New...
                            New Solution Configuration/Name: DEV;
                            Copy settings from: Release;
                            Create new project configuration=true.
                            Repeat to create TEST and PROD configs also.
                        </li>
                        <li>
                            <h4>Add Web.config Transforms</h4>
                            In Solution Explorer. Select Web.config. Right click.
                            Click on Add Config Transform. This creates separate
                            Web.DEV.config, Web.PROD.config, Web.TEST.config files.
                        </li>
                        <li>
                            <h4>Add Publish Profiles</h4>
                            When you are ready to deploy your application to a deployment environment,
                            right click on project item and select Publish...
                            <div>
                                Profile/Custom/Name: DEV
                            </div>
                            <div>
                                Connection/Publish method: File System;
                                Target location: \\hqweb3a1.ad.dfg.ca.gov\Apps\bios6
                            </div>
                            <div>
                                Settings/Configuration: DEV;
                                File Publish Options: Delete all existing files prior to publish
                            </div>
                        </li>
                    </ol>
                </details>
                <details>
                    <summary>Active Directory Membership Provider Config (gamma)</summary>
                    <ol>
                        <li>
                            20180604 Web.config/configuration/connectionStirngs/add/name="ADConnectionString,
                            connectionString="LDAP://ldap.ad.dfg.ca.gov/DC=ad,DC=dfg,DC=ca,DC=gov/
                        </li>
                        <li>
                            20180604 Added new web form Login.aspx for login controls
                            and Login_Click method in code-behind.
                        </li>
                        <li>
                            20180605 Copy code from bios6imaps Default aspx cs
                            login controls and code behind to gamma for AD login.
                        </li>
                    </ol>
                </details>
            </section>
            <section>
                <h2>
                    References
                </h2>
                <a href="https://cdfwsp.wildlife.ca.gov/sites/DTD/ITSB/appdev/SitePages/Home.aspx" title="ITB AppDev Guide"></a>
                <a href="file:///R:/WorkArea/LYRMayorPro/notes" title="LYRMayorPro.docx"></a>
                <details>
                    <summary>ArcGIS API for JavaScript</summary>
                    <ol>
                        <li>
                            <a href="https://developers.arcgis.com/javascript/">ArcJSAPI4</a> //20180531
                        </li>
                        <li>
                            <a href="https://developers.arcgis.com/javascript/latest/guide/esri-icon-font/index.html">
                                Esri Icon Font (Calcite theme)
                            </a>
                        </li>
                        <li>
                            <a href="https://developers.arcgis.com/javascript/latest/sample-code/intro-mapview/index.html">
                                Intro to MapView - Create a 2D map
                            </a>//20180531
                        </li>
                        <li>
                            <a href="https://developers.arcgis.com/javascript/latest/sample-code/intro-sceneview/index.html">
                                Intro to SceneView - Create a 3D map
                            </a>//20180531
                        </li>
                        <li>
                            <a href="https://developers.arcgis.com/javascript/latest/guide/proxies/index.html"
                               title="Proxy pages"></a>
                            <a href="https://developers.arcgis.com/javascript/latest/guide/cors/index.html"
                               title="CORS (Cross Origin Resource Sharing)"></a>
                        </li>
                    </ol>
                </details>
                <details>
                    <summary>ArcGIS Online</summary>
                    <p>
                        <a href="https://www.esri.com/arcgis-blog/products/arcgis-online/mapping/heat-mapping-in-two-simple-steps/"
                           title="Heat Mapping in Two Simple Steps"></a>
                    </p>
                </details>
                <details>
                    <summary>ASP.NET</summary>
                    <ol>
                        <li>
                            <a href="https://msdn.microsoft.com/en-us/library/system.web.security.activedirectorymembershipprovider(v=vs.110).aspx"
                               title="ActiveDirectoryMembershipProvider Class MSDN"></a>
                            <a href="https://msdn.microsoft.com/en-us/library/6e9y4s5t.aspx"
                               title="Configuring an ASP.NET Application to Use Membership"></a>
                            <a href="https://msdn.microsoft.com/en-us/library/ms178329.aspx"
                               title="ASP.NET Login Controls Overview"></a>
                            <a href="https://msdn.microsoft.com/en-us/library/w3te6wfz(v=vs.110).aspx"
                               title="HttpContext.Current.Server.HtmlEncode"></a>
                        </li>
                        <li>20180607
                            <a href="https://support.microsoft.com/en-us/help/976112/introduction-to-asp-net-inline-expressions-in-the-net-framework"
                               title="Introduction to ASP.NET inline expressions in the .NET Framework"></a>
                        </li>
                        <li>20180611
                            <a href="https://msdn.microsoft.com/en-us/library/dd465318(v=vs.100).aspx"
                               title="How to: Transform Web.config When Deploying a Web Application Project"></a>
                        </li>
                        <li>TODO
                            <a href="https://docs.microsoft.com/en-us/azure/app-service/app-service-web-get-started-dotnet"
                               title="Create an ASP.NET Core web app in Azure"></a>
                        </li>
                    </ol>
                </details>
                <details>
                    <summary>Git</summary>
                    <pre>
                    Command line instructions
Clone this repository
git clone http://hqtfs:8080/tfs/AppDev/BIOS/_git/bios6
Push an existing repository
git remote add origin http://hqtfs:8080/tfs/AppDev/BIOS/_git/bios6
git push -u origin --all
                    </pre>
                </details>
                <details>
                    <summary>Sample apps</summary>
                    <ol>
                        <li>20180612
                            <a href="https://www.parks.ca.gov/ParkIndex">Parks.ca.gov</a>
                        </li>
                    </ol>
                </details>
            </section>
        </main>
        <aside></aside>
        <footer>
            @<a href="mailto:biosgis@gmail.com" title="Contact">bios</a>
            &copy;
            <script>
                document.write(document.lastModified);
                document.write('&rect;' + window.innerWidth + 'x' + window.innerHeight + '&bull;');
                document.write(navigator.userAgent + ' on ' + navigator.platform);
            </script>
        </footer>
    </body>
</html>
